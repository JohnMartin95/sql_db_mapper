[package]
name = "sql_db_mapper_core"
version = "0.1.0"
authors = ["John Martin <johnmartin1225+rust@gmail.com>"]
license = "MIT OR Apache-2.0"
description = "Core library for code generated by sql_db_mapper"
repository = "https://github.com/JohnMartin95/sql_db_mapper"
documentation = "https://docs.rs/sql_db_mapper_core/"
readme = "README.md"
edition = "2018"

[dependencies]
# dependency for TryFromRow trait which uses Row and Error types
tokio-postgres = "0.7.0"
postgres = "0.19.0"
# general postgres dependencies
postgres-types = "0.2"
# derives
sql_db_mapper_derive = { path = "../sql_db_mapper_derive", version = "0.1.0" }

# crates with types that implement FromSql
bit-vec    = { version = "0.6", features = ["serde"], optional = true }
chrono     = { version = "0.4", features = ["serde"], optional = true }
eui48      = { version = "0.4", optional = true }
geo-types  = { version = "0.6.0", features = ["serde"], optional = true }
rust_decimal = { version = "1.10", features = ["db-postgres", "serde"], optional = true }
serde_json = { version = "1.0", optional = true }
time       = { version = "0.2", features = ["serde"], optional = true }
uuid       = { version = "0.8", features = ["serde"], optional = true }

# used by ToSql
bytes = "1.0"
# serde
# I'd love to feature gate the serde dependency but there's no feasible way I can figure out without weak-dep-features: https://github.com/rust-lang/cargo/issues/8832
serde = { version = "1.0", features = ["derive"] }

[features]
default = []

with-bit-vec-0_6     = ["bit-vec",    "postgres-types/with-bit-vec-0_6"]
with-chrono-0_4      = ["chrono",     "postgres-types/with-chrono-0_4"]
with-eui48-0_4       = ["eui48",      "postgres-types/with-eui48-0_4"]
with-geo-types-0_6   = ["geo-types",  "postgres-types/with-geo-types-0_6"]
with-rust_decimal-1  = ["rust_decimal"]
with-serde_json-1    = ["serde_json", "postgres-types/with-serde_json-1"]
with-time-0_2        = ["time",       "postgres-types/with-time-0_2"]
with-uuid-0_8        = ["uuid",       "postgres-types/with-uuid-0_8"]

all-features = [
	"with-bit-vec-0_6",
	"with-chrono-0_4",
	"with-eui48-0_4",
	"with-geo-types-0_6",
	"with-rust_decimal-1",
	"with-serde_json-1",
	"with-time-0_2",
	"with-uuid-0_8",
]

[package.metadata.docs.rs]
all-features = true
